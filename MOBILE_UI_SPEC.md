# 모바일 대응 UI/UX 설계 문서

---

## 1. 디바이스 구분 기준

### 브레이크포인트

- **데스크탑:** 화면 너비 768px 이상 (md 브레이크포인트)
- **모바일:** 화면 너비 768px 미만

### 구분 방법

Tailwind CSS의 반응형 클래스를 사용합니다:

- `hidden md:block` → 모바일에서 숨김, 데스크탑에서 표시
- `md:hidden` → 데스크탑에서 숨김, 모바일에서 표시

이 방식은 CSS 미디어 쿼리(`@media (min-width: 768px)`)를 사용하므로 JavaScript 없이 순수 CSS로 디바이스를 구분합니다.

---

## 2. 지도 컨트롤 패널 (지역/작업영역 선택)

### 2-1. 현재 데스크탑 레이아웃

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│                                              ┌────────────────────┐ │
│                                              │ 🌊 Ocean Campus    │ │
│                                              ├────────────────────┤ │
│                                              │ 해역 컨트롤  [초기뷰][펼치기] │
│                                              ├────────────────────┤ │
│              [ 지 도 ]                       │ [포항][울진]  🔍검색 │ │
│                                              ├────────────────────┤ │
│                                              │ 🟢완료 🟡진행 🔵계획 │ │
│                                              ├────────────────────┤ │
│                                              │ ▼ 완료 (3)         │ │
│                                              │   · 포항-1         │ │
│                                              │   · 포항-2         │ │
│                                              │ ▼ 진행 (2)         │ │
│                                              │   · 포항-3         │ │
│                                              └────────────────────┘ │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**구성 요소 (위에서 아래 순서):**

1. **로고 헤더:** Ocean Campus 로고 + 텍스트
2. **컨트롤 헤더:** "해역 컨트롤" 제목 + [초기뷰] 버튼 + [펼치기/접기] 버튼
3. **지역 선택 + 검색:** [포항] [울진] 버튼 (가로 배열) + 검색창 (같은 줄)
4. **단계 필터:** 🟢완료 🟡진행 🔵계획 (가로 배열, 칩 형태)
5. **작업영역 리스트:** 단계별로 그룹핑된 접이식 리스트

**위치:** 화면 우측 상단 고정, 너비 430px

---

### 2-2. 모바일 바텀시트 레이아웃

```
┌─────────────────────────┐
│                         │
│                         │
│        [ 지 도 ]        │
│                         │
│                         │
├─────────────────────────┤ ← 바텀시트 경계
│         ═══             │ ← 드래그 핸들 (가운데 정렬)
│ [포항][울진]     🔍     │ ← 1줄: 지역버튼 + 검색아이콘
└─────────────────────────┘
        (Peek 상태: 20%)
```

**드래그하여 확장 시:**

```
┌─────────────────────────┐
│        [ 지 도 ]        │
├─────────────────────────┤
│         ═══             │ ← 드래그 핸들
│ [포항][울진]     🔍     │ ← 1줄: 지역버튼 + 검색아이콘
├─────────────────────────┤
│ 🔍 작업영역/해역 검색...│ ← 검색 입력창 (전체 너비)
├─────────────────────────┤
│ 🟢완료  🟡진행  🔵계획  │ ← 필터 칩 (가로 배열)
├─────────────────────────┤
│ ▼ 완료 (3)              │
│   포항-1 · 암반 · 15m   │
│   포항-2 · 암반 · 12m   │
│ ▼ 진행 (2)              │
│   포항-3 · 모래 · 10m   │
│         ...             │
└─────────────────────────┘
        (확장 상태: 85%)
```

---

### 2-3. 모바일 바텀시트 내부 배치 상세

#### 영역 구분 (위에서 아래 순서)

| 순서 | 영역            | 설명                                     | 높이   |
| ---- | --------------- | ---------------------------------------- | ------ |
| 1    | 드래그 핸들     | 가운데 정렬된 회색 막대, 터치하여 드래그 | 40px   |
| 2    | 미니 헤더       | 지역 버튼 + 검색 아이콘 (항상 표시)      | 48px   |
| 3    | 검색창          | 전체 너비 입력 필드 (확장 시 표시)       | 44px   |
| 4    | 필터 칩         | 단계별 필터 버튼 가로 배열               | 44px   |
| 5    | 구분선          | 얇은 가로선                              | 1px    |
| 6    | 작업영역 리스트 | 스크롤 가능한 영역 (남은 공간 전체)      | 나머지 |

#### 각 영역별 상세 배치

**1. 드래그 핸들**

- 위치: 바텀시트 최상단, 가운데 정렬
- 크기: 너비 48px, 높이 6px, 둥근 모서리
- 색상: 반투명 흰색 (40% 불투명도)
- 기능: 터치하여 위/아래로 드래그하면 시트 높이 조절

**2. 미니 헤더 (Peek 상태에서도 항상 보임)**

```
┌─────────────────────────────────────┐
│  [포항] [울진]              [🔍]   │
│  ←── 좌측 정렬 ──→    ←── 우측 ──→ │
└─────────────────────────────────────┘
```

- 지역 버튼: 좌측 정렬, 가로 배열, 선택된 지역은 하이라이트
- 검색 아이콘: 우측 정렬, 탭하면 검색창으로 포커스 이동

**3. 검색창**

```
┌─────────────────────────────────────┐
│  🔍 작업영역/해역유형 검색...       │
│  ←────── 전체 너비 (패딩 제외) ───→ │
└─────────────────────────────────────┘
```

- 전체 너비 사용
- 좌측에 돋보기 아이콘
- 플레이스홀더: "작업영역/해역유형 검색..."

**4. 필터 칩**

```
┌─────────────────────────────────────┐
│  [🟢 완료]  [🟡 진행]  [🔵 계획]   │
│  ←───── 균등 배분 (flex) ─────→    │
└─────────────────────────────────────┘
```

- 3개 버튼 균등 배분 (flex, justify-between)
- 각 버튼 앞에 색상 원형 아이콘
- 선택된 필터는 배경색 하이라이트

**5. 작업영역 리스트**

```
┌─────────────────────────────────────┐
│ ▼ 완료 (3)                    [∧]  │ ← 그룹 헤더 (탭하면 접기/펼치기)
├─────────────────────────────────────┤
│ ● 포항-1                           │
│   암반 · 15m · 3일 전 업데이트     │ ← 각 항목
├─────────────────────────────────────┤
│ ● 포항-2                           │
│   암반 · 12m · 5일 전 업데이트     │
├─────────────────────────────────────┤
│ ▶ 진행 (2)                    [∨]  │ ← 접힌 그룹
└─────────────────────────────────────┘
```

- 단계별로 그룹핑 (완료/진행/계획)
- 그룹 헤더 탭하면 접기/펼치기
- 각 작업영역 항목 탭하면 지도 이동 + 상세 모달 열기

---

### 2-4. 바텀시트 Snap Points (고정 높이)

| 상태     | 높이 | 보이는 내용                   | 사용 시나리오                                |
| -------- | ---- | ----------------------------- | -------------------------------------------- |
| **Peek** | 20%  | 드래그 핸들 + 미니 헤더만     | 지도를 최대한 보면서 지역만 빠르게 전환할 때 |
| **Half** | 50%  | + 검색창 + 필터 + 리스트 일부 | 검색/필터하면서 지도도 함께 볼 때            |
| **Full** | 85%  | 전체 리스트 스크롤 가능       | 작업영역을 상세히 탐색할 때                  |

**동작 방식:**

- 드래그 핸들을 위로 스와이프 → 확장
- 드래그 핸들을 아래로 스와이프 → 축소
- 손을 놓으면 가장 가까운 Snap Point로 자동 이동

---

## 3. 작업영역 상세 모달

### 3-1. 현재 데스크탑 레이아웃

```
┌─────────────────────────────────────────────────────────────────┐
│  ● 작업 영역 상세 (ID: pohang-1)                        [닫기] │
│    복원 시작일 2024-03-15 · 암반 · 15m · 면적 2,500㎡          │
├─────────────────────────────────────────────────────────────────┤
│  [개요] [이식 해조류] [성장] [생물다양성] [수질] [미디어]      │ ← 탭 바 (가로 스크롤)
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────┐ ┌─────────────────────────┐   │
│  │                             │ │  이식 해조류 개요       │   │
│  │      [해역 이미지]          │ │  ● 감태 1,200개체       │   │
│  │                             │ │  ● 모자반 800개체       │   │
│  │  ┌──────┐┌──────┐┌──────┐  │ │  ────────────────────   │   │
│  │  │착생률││생존률││성장률│  │ │  서식: 암반 | 수심: 15m │   │
│  │  │ 92% ││ 85% ││2.1mm │  │ │  면적: 2,500㎡          │   │
│  │  └──────┘└──────┘└──────┘  │ └─────────────────────────┘   │
│  └─────────────────────────────┘                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**구성 요소:**

1. **헤더:** 제목 + 기본정보 + 닫기 버튼
2. **탭 바:** 6개 탭 버튼 가로 배열
3. **컨텐츠 영역:** 선택된 탭의 내용

**크기:** 너비 980px, 최대 92vw

---

### 3-2. 모바일 모달 레이아웃

모바일에서는 **풀스크린 모달**로 변경합니다.

```
┌─────────────────────────┐
│ ← 뒤로    pohang-1      │ ← 상단 바: 뒤로가기 + 영역 ID
├─────────────────────────┤
│ 복원 시작일 2024-03-15  │
│ 암반 · 15m · 2,500㎡    │ ← 기본 정보 (2줄로 압축)
├─────────────────────────┤
│ [개요][이식][성장][...]→│ ← 탭 바 (가로 스크롤 가능)
├─────────────────────────┤
│                         │
│    [해역 이미지]        │
│                         │
├─────────────────────────┤
│ ┌───────┐┌───────┐      │
│ │착생률 ││생존률 │      │ ← KPI 카드 (2열 그리드)
│ │ 92%   ││ 85%   │      │
│ └───────┘└───────┘      │
│ ┌───────┐               │
│ │성장률 │               │
│ │2.1mm  │               │
│ └───────┘               │
├─────────────────────────┤
│ 이식 해조류 개요        │
│ ● 감태 1,200개체        │ ← 리스트 (세로 스크롤)
│ ● 모자반 800개체        │
│ ────────────────────    │
│ 서식: 암반              │
│ 수심: 15m               │
│ 면적: 2,500㎡           │
└─────────────────────────┘
```

---

### 3-3. 모바일 모달 내부 배치 상세

#### 영역 구분 (위에서 아래 순서)

| 순서 | 영역   | 데스크탑                 | 모바일 변경                            |
| ---- | ------ | ------------------------ | -------------------------------------- |
| 1    | 헤더   | 한 줄에 제목+정보+닫기   | **2줄로 분리**, 뒤로가기 버튼으로 변경 |
| 2    | 탭 바  | 6개 탭 한 줄 표시        | **가로 스크롤** 가능하게 변경          |
| 3    | 컨텐츠 | 2열 그리드 (이미지+정보) | **1열 세로 배치**로 변경               |

#### 각 영역별 상세

**1. 모바일 헤더**

```
┌─────────────────────────────────────┐
│  [←]  작업 영역 상세 (pohang-1)     │ ← 1줄: 뒤로 + 제목
├─────────────────────────────────────┤
│  2024-03-15 · 암반 · 15m · 2,500㎡  │ ← 2줄: 기본정보 (작은 글씨)
└─────────────────────────────────────┘
```

- [닫기] 버튼 대신 [←] 뒤로가기 버튼 (좌측 상단)
- 기본 정보는 2줄째로 이동, 글씨 크기 축소

**2. 모바일 탭 바**

```
┌─────────────────────────────────────────────────┐
│  [개요] [이식 해조류] [성장] [생물다양성] →    │
│  ←──────── 가로 스크롤 가능 ──────────→        │
└─────────────────────────────────────────────────┘
```

- 탭이 화면 너비를 초과하면 가로 스크롤
- 선택된 탭은 항상 보이도록 자동 스크롤
- 스크롤 가능함을 나타내는 그라데이션 힌트 (우측 페이드)

**3. 개요 탭 컨텐츠 (모바일)**

```
데스크탑: 2열 (이미지 | 정보)
    ↓
모바일: 1열 세로 배치

┌─────────────────────────┐
│                         │
│    [해역 전경 이미지]   │  ← 전체 너비
│                         │
├─────────────────────────┤
│ ┌─────────┐ ┌─────────┐ │
│ │ 착생률  │ │ 생존률  │ │  ← KPI: 2열 그리드
│ │  92%    │ │  85%    │ │
│ └─────────┘ └─────────┘ │
│ ┌─────────┐             │
│ │ 성장률  │             │  ← 3번째 카드는 다음 줄
│ │ 2.1mm   │             │
│ └─────────┘             │
├─────────────────────────┤
│ 이식 해조류 개요        │  ← 정보 섹션
│ ● 감태 1,200개체 · 50㎡ │
│ ● 모자반 800개체 · 30㎡ │
│ ─────────────────────   │
│ 서식: 암반 | 수심: 15m  │
│ 면적: 2,500㎡ | 단계: 진행│
└─────────────────────────┘
```

**4. 차트 탭 (성장/수질) 컨텐츠**

```
데스크탑: 3열 차트 배치
    ↓
모바일: 1열 세로 배치 (세로 스크롤)

┌─────────────────────────┐
│  착생률(%)              │
│  ┌───────────────────┐  │
│  │    [라인 차트]    │  │  ← 전체 너비 차트
│  └───────────────────┘  │
├─────────────────────────┤
│  생존률(%)              │
│  ┌───────────────────┐  │
│  │    [라인 차트]    │  │
│  └───────────────────┘  │
├─────────────────────────┤
│  성장률(mm/일)          │
│  ┌───────────────────┐  │
│  │    [라인 차트]    │  │
│  └───────────────────┘  │
└─────────────────────────┘
```

---

## 4. 반응형 레이아웃 변환 요약

### 컨트롤 패널

| 요소          | 데스크탑             | 모바일                      |
| ------------- | -------------------- | --------------------------- |
| **위치**      | 우측 상단 고정       | 하단 바텀시트               |
| **너비**      | 430px 고정           | 화면 전체 너비              |
| **높이**      | 자동 (컨텐츠에 따라) | 드래그로 조절 (20%/50%/85%) |
| **로고**      | 항상 표시            | 숨김                        |
| **지역 버튼** | 검색창과 같은 줄     | 미니 헤더에 항상 표시       |
| **검색창**    | 지역 버튼 옆         | 별도 줄 (확장 시)           |
| **필터**      | 가로 배열            | 가로 배열 (동일)            |
| **리스트**    | 최대 56vh            | 나머지 공간 전체            |

### 상세 모달

| 요소              | 데스크탑             | 모바일               |
| ----------------- | -------------------- | -------------------- |
| **크기**          | 980px × 자동         | 풀스크린             |
| **닫기**          | [닫기] 버튼 (우측)   | [←] 뒤로 버튼 (좌측) |
| **헤더**          | 1줄                  | 2줄                  |
| **탭 바**         | 한 줄에 모두 표시    | 가로 스크롤          |
| **개요 레이아웃** | 2열 (이미지 \| 정보) | 1열 세로             |
| **차트 레이아웃** | 3열                  | 1열 세로 스크롤      |
| **KPI 카드**      | 3열                  | 2열 그리드           |

---

## 5. 터치 인터랙션

### 바텀시트

- **드래그 핸들 스와이프:** 시트 높이 조절
- **빈 영역 탭:** 변화 없음 (지도 조작 가능)
- **리스트 스크롤:** 시트가 Full 상태일 때만 내부 스크롤

### 상세 모달

- **뒤로 버튼 또는 스와이프:** 모달 닫기
- **탭 바 스와이프:** 탭 전환 (선택사항)
- **컨텐츠 영역:** 세로 스크롤

---

## 6. 구현 시 수정 파일

이 문서 기반으로 구현 진행 시 수정할 파일:

1. `src/components/ui/BottomSheet.jsx` - 새로 생성
2. `src/components/mapBox/topRightControls/topRightControls.jsx` - 모바일 분기 추가
3. `src/components/detail-info/detail-info-modal.jsx` - 풀스크린 모바일 분기 추가
4. `src/components/detail-info/header.jsx` - 모바일 헤더 스타일 추가
5. `src/components/detail-info/tabs.jsx` - 가로 스크롤 추가
6. `src/components/detail-info/tabs/overview-tab.jsx` - 1열 레이아웃 분기
7. `src/components/detail-info/tabs/growth-tab.jsx` - 1열 레이아웃 분기
8. `src/components/detail-info/tabs/water-tab.jsx` - 1열 레이아웃 분기
