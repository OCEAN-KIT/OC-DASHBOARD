# 모바일 대응 UI/UX 설계 문서

---

## 1. 디바이스 구분 기준

### 브레이크포인트

- **데스크탑:** 화면 너비 768px 이상 (md 브레이크포인트)
- **모바일:** 화면 너비 768px 미만

### 구분 방법

Tailwind CSS의 반응형 클래스를 사용합니다:

- `hidden md:block` → 모바일에서 숨김, 데스크탑에서 표시
- `md:hidden` → 데스크탑에서 숨김, 모바일에서 표시

이 방식은 CSS 미디어 쿼리(`@media (min-width: 768px)`)를 사용하므로 JavaScript 없이 순수 CSS로 디바이스를 구분합니다.

---

## 2. 지도 컨트롤 패널 (지역/작업영역 선택)

### 2-1. 현재 데스크탑 레이아웃

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│                                              ┌────────────────────┐ │
│                                              │ 🌊 Ocean Campus    │ │
│                                              ├────────────────────┤ │
│                                              │ 해역 컨트롤  [초기뷰][펼치기] │
│                                              ├────────────────────┤ │
│              [ 지 도 ]                       │ [포항][울진]  🔍검색 │ │
│                                              ├────────────────────┤ │
│                                              │ 🟢완료 🟡진행 🔵계획 │ │
│                                              ├────────────────────┤ │
│                                              │ ▼ 완료 (3)         │ │
│                                              │   · 포항-1         │ │
│                                              │   · 포항-2         │ │
│                                              │ ▼ 진행 (2)         │ │
│                                              │   · 포항-3         │ │
│                                              └────────────────────┘ │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**구성 요소 (위에서 아래 순서):**

1. **로고 헤더:** Ocean Campus 로고 + 텍스트
2. **컨트롤 헤더:** "해역 컨트롤" 제목 + [초기뷰] 버튼 + [펼치기/접기] 버튼
3. **지역 선택 + 검색:** [포항] [울진] 버튼 (가로 배열) + 검색창 (같은 줄)
4. **단계 필터:** 🟢완료 🟡진행 🔵계획 (가로 배열, 칩 형태)
5. **작업영역 리스트:** 단계별로 그룹핑된 접이식 리스트

**위치:** 화면 우측 상단 고정, 너비 430px

---

### 2-2. 모바일 바텀시트 레이아웃

```
┌─────────────────────────┐
│                         │
│                         │
│        [ 지 도 ]        │
│                         │
│                         │
├─────────────────────────┤ ← 바텀시트 경계
│         ═══             │ ← 드래그 핸들 (가운데 정렬)
│ [포항][울진]     🔍     │ ← 1줄: 지역버튼 + 검색아이콘
└─────────────────────────┘
        (Peek 상태: 20%)
```

**드래그하여 확장 시:**

```
┌─────────────────────────┐
│        [ 지 도 ]        │
├─────────────────────────┤
│         ═══             │ ← 드래그 핸들
│ [포항][울진]     🔍     │ ← 1줄: 지역버튼 + 검색아이콘
├─────────────────────────┤
│ 🔍 작업영역/해역 검색...│ ← 검색 입력창 (전체 너비)
├─────────────────────────┤
│ 🟢완료  🟡진행  🔵계획  │ ← 필터 칩 (가로 배열)
├─────────────────────────┤
│ ▼ 완료 (3)              │
│   포항-1 · 암반 · 15m   │
│   포항-2 · 암반 · 12m   │
│ ▼ 진행 (2)              │
│   포항-3 · 모래 · 10m   │
│         ...             │
└─────────────────────────┘
        (확장 상태: 85%)
```

---

### 2-3. 모바일 바텀시트 내부 배치 상세

#### 영역 구분 (위에서 아래 순서)

| 순서 | 영역            | 설명                                     | 높이   |
| ---- | --------------- | ---------------------------------------- | ------ |
| 1    | 드래그 핸들     | 가운데 정렬된 회색 막대, 터치하여 드래그 | 40px   |
| 2    | 미니 헤더       | 지역 버튼 + 검색 아이콘 (항상 표시)      | 48px   |
| 3    | 검색창          | 전체 너비 입력 필드 (확장 시 표시)       | 44px   |
| 4    | 필터 칩         | 단계별 필터 버튼 가로 배열               | 44px   |
| 5    | 구분선          | 얇은 가로선                              | 1px    |
| 6    | 작업영역 리스트 | 스크롤 가능한 영역 (남은 공간 전체)      | 나머지 |

#### 각 영역별 상세 배치

**1. 드래그 핸들**

- 위치: 바텀시트 최상단, 가운데 정렬
- 크기: 너비 48px, 높이 6px, 둥근 모서리
- 색상: 반투명 흰색 (40% 불투명도)
- 기능: 터치하여 위/아래로 드래그하면 시트 높이 조절

**2. 미니 헤더 (Peek 상태에서도 항상 보임)**

```
┌─────────────────────────────────────┐
│  [포항] [울진]              [🔍]   │
│  ←── 좌측 정렬 ──→    ←── 우측 ──→ │
└─────────────────────────────────────┘
```

- 지역 버튼: 좌측 정렬, 가로 배열, 선택된 지역은 하이라이트
- 검색 아이콘: 우측 정렬, 탭하면 검색창으로 포커스 이동

**3. 검색창**

```
┌─────────────────────────────────────┐
│  🔍 작업영역/해역유형 검색...       │
│  ←────── 전체 너비 (패딩 제외) ───→ │
└─────────────────────────────────────┘
```

- 전체 너비 사용
- 좌측에 돋보기 아이콘
- 플레이스홀더: "작업영역/해역유형 검색..."

**4. 필터 칩**

```
┌─────────────────────────────────────┐
│  [🟢 완료]  [🟡 진행]  [🔵 계획]   │
│  ←───── 균등 배분 (flex) ─────→    │
└─────────────────────────────────────┘
```

- 3개 버튼 균등 배분 (flex, justify-between)
- 각 버튼 앞에 색상 원형 아이콘
- 선택된 필터는 배경색 하이라이트

**5. 작업영역 리스트**

```
┌─────────────────────────────────────┐
│ ▼ 완료 (3)                    [∧]  │ ← 그룹 헤더 (탭하면 접기/펼치기)
├─────────────────────────────────────┤
│ ● 포항-1                           │
│   암반 · 15m · 3일 전 업데이트     │ ← 각 항목
├─────────────────────────────────────┤
│ ● 포항-2                           │
│   암반 · 12m · 5일 전 업데이트     │
├─────────────────────────────────────┤
│ ▶ 진행 (2)                    [∨]  │ ← 접힌 그룹
└─────────────────────────────────────┘
```

- 단계별로 그룹핑 (완료/진행/계획)
- 그룹 헤더 탭하면 접기/펼치기
- 각 작업영역 항목 탭하면 지도 이동 + 상세 모달 열기

---

### 2-4. 바텀시트 Snap Points (고정 높이)

| 상태     | 높이 | 보이는 내용                   | 사용 시나리오                                |
| -------- | ---- | ----------------------------- | -------------------------------------------- |
| **Peek** | 20%  | 드래그 핸들 + 미니 헤더만     | 지도를 최대한 보면서 지역만 빠르게 전환할 때 |
| **Half** | 50%  | + 검색창 + 필터 + 리스트 일부 | 검색/필터하면서 지도도 함께 볼 때            |
| **Full** | 85%  | 전체 리스트 스크롤 가능       | 작업영역을 상세히 탐색할 때                  |

**동작 방식:**

- 드래그 핸들을 위로 스와이프 → 확장
- 드래그 핸들을 아래로 스와이프 → 축소
- 손을 놓으면 가장 가까운 Snap Point로 자동 이동

---

## 3. 작업영역 상세 모달

### 3-1. 현재 데스크탑 레이아웃

```
┌─────────────────────────────────────────────────────────────────────┐
│  🟢 포항-1                                                  [닫기] │
│     복원 시작일 2024-3-15 · 암반 · 15m · 면적 2,500 m²             │
├─────────────────────────────────────────────────────────────────────┤
│  [개요] [현황] [생태 반응] [환경] [사진]                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────────────────────────────┐  ┌─────────────────────┐ │
│  │ 📊 현재 단계                         │  │ 📐 면적             │ │
│  │ 이식 완료 (이식 작업이 완료된 단계)  │  │ 2,500 m²            │ │
│  │ ○──●──○──○──○  (단계 스테퍼)        │  │                     │ │
│  └──────────────────────────────────────┘  └─────────────────────┘ │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐                      │
│  │ 📍 지역   │  │ 🌊 평균수심│  │ 🐚 해역유형│                      │
│  │ 포항      │  │ 15 m      │  │ 암반      │                      │
│  └───────────┘  └───────────┘  └───────────┘                      │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │ 📅 관측 기간                                                 │  │
│  │ 2024년 3월 15일 ───── 진행 중                                │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**구성 요소:**

1. **헤더:** 녹색 인디케이터 + 영역명 + 기본정보 + 닫기 버튼
2. **구분선:** 1px `bg-white/10`
3. **탭 바:** 5개 탭 버튼 가로 배열 (개요 / 현황 / 생태 반응 / 환경 / 사진)
4. **컨텐츠 영역:** 선택된 탭의 내용 (p-5)

**크기:** 너비 980px, 최대 92vw
**스타일:** 글래스모피즘 (backdrop-blur-xl, bg-white/10, border-white/15, rounded-2xl)

---

### 3-2. 탭별 데스크탑 레이아웃 상세

#### 개요 탭 (grid-cols-3)

| 위치          | 카드명      | span   | 내용                                     | 데코 SVG     |
| ------------- | ----------- | ------ | ---------------------------------------- | ------------ |
| 1행 좌 (2col) | 현재 단계   | 2cols  | 단계명 + 설명 + StageStepper 프로그레스  | 없음         |
| 1행 우        | 면적        | 1col   | 숫자 + m² 단위                           | GridDeco     |
| 2행 좌        | 지역        | 1col   | 지역명 (예: 포항)                        | PinRippleDeco|
| 2행 중        | 평균 수심   | 1col   | 숫자 + m 단위                            | WaveDeco     |
| 2행 우        | 해역 유형   | 1col   | 유형명 (예: 암반)                        | ShellDeco    |
| 3행 (3col)    | 관측 기간   | 3cols  | 시작일 ─── 종료일(또는 "진행 중")        | TimelineDeco |

#### 현황 탭 (grid-cols-6)

| 위치           | 카드명             | span   | 높이    | 내용                               |
| -------------- | ------------------ | ------ | ------- | ---------------------------------- |
| 1행 좌         | 종별 현황          | 3cols  | 260px   | SpeciesTable (종/수량/면적 테이블) |
| 1행 우         | 방식별 분포        | 3cols  | 260px   | MethodDonutChart (도넛 차트)       |
| 2행 1열        | 총 이식 면적       | 1col   | 180px   | StatCard (숫자 + ㎡)               |
| 2행 2열        | 누적 작업 횟수     | 1col   | 180px   | StatCard (숫자 + 회)               |
| 2행 3열        | 최근 작업일        | 1col   | 180px   | StatCard (날짜)                    |
| 2행 4~6열      | 최근 3개월 작업    | 3cols  | 180px   | RecentWorkChart (바 차트)          |

#### 생태 반응 탭 (grid-cols-6)

| 위치           | 카드명             | span   | 높이    | 내용                               |
| -------------- | ------------------ | ------ | ------- | ---------------------------------- |
| 1행 좌         | 착생 상태          | 3cols  | 220px   | AttachmentStatusCard               |
| 1행 우         | 생존 상태          | 3cols  | 220px   | SurvivalStatusCard                 |
| 2행 (전체)     | 대표 개체 성장 추이 | 6cols  | 220px   | GrowthChart (라인 차트)            |

#### 환경 탭 (grid-cols-4)

| 위치           | 카드명             | span   | 높이    | 내용                               |
| -------------- | ------------------ | ------ | ------- | ---------------------------------- |
| 1행            | 환경 등급 요약     | 4cols  | 자동    | 시야/조류/서지/파도 4개 카드       |
| 2행            | 수온 시계열        | 4cols  | 220px   | TemperatureChart (라인 차트)       |

#### 사진 탭

서브탭으로 구분:

| 서브탭       | 내용                                         |
| ------------ | -------------------------------------------- |
| 복원 전/후   | BeforeAfterCard (이전/이후 사진 비교)        |
| 타임라인     | TimelineView (시간순 사진 나열)              |

---

### 3-3. 모바일 모달 레이아웃

모바일에서는 **풀스크린 모달**로 변경합니다.

```
┌─────────────────────────┐
│ [←]  포항-1              │ ← 뒤로가기 + 영역명
│ 2024-3-15 · 암반 · 15m  │ ← 기본정보 (작은 글씨)
├─────────────────────────┤
│ [개요][현황][생태][...]→ │ ← 탭 바 (가로 스크롤)
├─────────────────────────┤
│                          │
│  (탭 컨텐츠 영역)        │ ← 세로 스크롤
│                          │
└─────────────────────────┘
```

---

### 3-4. 모바일 모달 내부 배치 상세

#### 영역 구분 (위에서 아래 순서)

| 순서 | 영역   | 데스크탑                        | 모바일 변경                            |
| ---- | ------ | ------------------------------- | -------------------------------------- |
| 1    | 헤더   | 한 줄에 인디케이터+이름+닫기    | **2줄로 분리**, 뒤로가기 버튼으로 변경 |
| 2    | 탭 바  | 5개 탭 한 줄 표시               | **가로 스크롤** 가능하게 변경          |
| 3    | 컨텐츠 | 멀티 컬럼 그리드 (3~6col)       | **1~2열 세로 배치**로 변경             |

#### 각 영역별 상세

**1. 모바일 헤더**

```
┌─────────────────────────────────────┐
│  [←]  포항-1                        │ ← 1줄: 뒤로 + 영역명
├─────────────────────────────────────┤
│  2024-3-15 · 암반 · 15m · 2,500m²  │ ← 2줄: 기본정보 (text-xs)
└─────────────────────────────────────┘
```

- [닫기] 버튼 대신 [←] 뒤로가기 버튼 (좌측 상단)
- 녹색 인디케이터 + 영역명 유지
- 기본 정보는 2줄째로 이동, 글씨 크기 축소

**2. 모바일 탭 바**

```
┌───────────────────────────────────────────┐
│  [개요] [현황] [생태 반응] [환경] [사진]→ │
│  ←──────── 가로 스크롤 가능 ──────────→   │
└───────────────────────────────────────────┘
```

- 탭이 화면 너비를 초과하면 가로 스크롤 (`overflow-x-auto`)
- 선택된 탭은 항상 보이도록 자동 스크롤
- 스크롤 가능함을 나타내는 그라데이션 힌트 (우측 페이드)

**3. 개요 탭 (모바일)**

```
데스크탑: grid-cols-3
    ↓
모바일: grid-cols-2

┌─────────────────────────┐
│ 📊 현재 단계 (col-span-2)│
│ 이식 완료               │
│ ○──●──○──○──○           │ ← 스테퍼 (작은 사이즈)
├─────────────────────────┤
│ 📐 면적    │ 📍 지역    │ ← 2열 그리드
│ 2,500 m²   │ 포항       │
├─────────────────────────┤
│ 🌊 평균수심 │ 🐚 해역유형│
│ 15 m       │ 암반       │
├─────────────────────────┤
│ 📅 관측 기간 (col-span-2)│
│ 2024년 3월 ~ 진행 중     │
└─────────────────────────┘
```

- `grid-cols-3` → `grid-cols-2`
- 현재 단계: col-span-2 유지 (전체 너비)
- 면적/지역/수심/해역유형: 각 1col (2×2 배치)
- 관측 기간: col-span-2 (전체 너비)

**4. 현황 탭 (모바일)**

```
데스크탑: grid-cols-6
    ↓
모바일: grid-cols-2 (세로 스크롤)

┌─────────────────────────┐
│ 종별 현황 (col-span-2)   │
│ ┌─────────────────────┐ │ ← 테이블 (가로 스크롤)
│ │ 종 │ 수량 │ 면적 .. │ │
│ └─────────────────────┘ │
├─────────────────────────┤
│ 방식별 분포 (col-span-2) │
│ ┌─────────────────────┐ │ ← 도넛 차트 (전체 너비)
│ │    [ 도넛 차트 ]    │ │
│ └─────────────────────┘ │
├─────────────────────────┤
│ 총이식면적 │ 누적작업횟수│ ← 2열 그리드
├─────────────────────────┤
│ 최근작업일  (col-span-2) │
├─────────────────────────┤
│ 최근 3개월 (col-span-2)  │
│ ┌─────────────────────┐ │ ← 바 차트 (전체 너비)
│ └─────────────────────┘ │
└─────────────────────────┘
```

- 종별 현황 / 방식별 분포: 각각 전체 너비로 세로 배치
- 통계 카드 3개 → 2+1 배치
- 최근 3개월 차트: 전체 너비

**5. 생태 반응 탭 (모바일)**

```
데스크탑: grid-cols-6
    ↓
모바일: grid-cols-1 (세로 스크롤)

┌─────────────────────────┐
│ 착생 상태 (전체 너비)    │
│ ┌─────────────────────┐ │
│ │  착생률 데이터       │ │
│ └─────────────────────┘ │
├─────────────────────────┤
│ 생존 상태 (전체 너비)    │
│ ┌─────────────────────┐ │
│ │  생존률 데이터       │ │
│ └─────────────────────┘ │
├─────────────────────────┤
│ 대표 개체 성장 추이      │
│ ┌─────────────────────┐ │
│ │   [라인 차트]        │ │ ← 전체 너비 차트
│ └─────────────────────┘ │
└─────────────────────────┘
```

- 3개 카드 모두 전체 너비로 세로 스택

**6. 환경 탭 (모바일)**

```
데스크탑: grid-cols-4
    ↓
모바일: grid-cols-2 (세로 스크롤)

┌─────────────────────────┐
│ 시야 등급   │ 조류 등급  │ ← 환경 요약 (2×2 그리드)
├─────────────────────────┤
│ 서지 등급   │ 파도 등급  │
├─────────────────────────┤
│ 수온 시계열 (col-span-2) │
│ ┌─────────────────────┐ │
│ │   [라인 차트]        │ │ ← 전체 너비 차트
│ └─────────────────────┘ │
└─────────────────────────┘
```

- 환경 등급 4개 카드: 4열 → 2열 (2×2)
- 수온 차트: 전체 너비 유지

**7. 사진 탭 (모바일)**

```
┌─────────────────────────┐
│ [복원 전/후] [타임라인]  │ ← 서브탭 (변경 없음)
├─────────────────────────┤
│                          │
│   [사진 컨텐츠]          │ ← 전체 너비, 세로 스크롤
│                          │
└─────────────────────────┘
```

- 서브탭 구조는 동일 유지
- 복원 전/후: 이미지를 세로 배치 (가로 → 세로)
- 타임라인: 레이아웃 동일 (이미 세로 구조)

---

## 4. 반응형 레이아웃 변환 요약

### 컨트롤 패널

| 요소          | 데스크탑             | 모바일                      |
| ------------- | -------------------- | --------------------------- |
| **위치**      | 우측 상단 고정       | 하단 바텀시트               |
| **너비**      | 430px 고정           | 화면 전체 너비              |
| **높이**      | 자동 (컨텐츠에 따라) | 드래그로 조절 (20%/50%/85%) |
| **로고**      | 항상 표시            | 숨김                        |
| **지역 버튼** | 검색창과 같은 줄     | 미니 헤더에 항상 표시       |
| **검색창**    | 지역 버튼 옆         | 별도 줄 (확장 시)           |
| **필터**      | 가로 배열            | 가로 배열 (동일)            |
| **리스트**    | 최대 56vh            | 나머지 공간 전체            |

### 상세 모달

| 요소                | 데스크탑                            | 모바일                      |
| ------------------- | ----------------------------------- | --------------------------- |
| **크기**            | 980px × 자동                        | 풀스크린                    |
| **닫기**            | [닫기] 버튼 (우측)                  | [←] 뒤로 버튼 (좌측)        |
| **헤더**            | 1줄 (인디케이터+이름+정보+닫기)     | 2줄 (이름 / 정보)           |
| **탭 바**           | 5개 탭 한 줄 (개요/현황/생태/환경/사진) | 가로 스크롤              |
| **개요 레이아웃**   | 3열 벤토 그리드                     | 2열 그리드                  |
| **현황 레이아웃**   | 6열 그리드 (테이블+도넛+통계+차트)  | 2열, 세로 스크롤            |
| **생태 반응 레이아웃** | 6열 그리드 (착생+생존+성장차트)   | 1열 세로 스택               |
| **환경 레이아웃**   | 4열 그리드 (등급4개+수온차트)       | 2열 (등급 2×2) + 전체너비   |
| **사진 레이아웃**   | 서브탭 (전/후, 타임라인)            | 동일 (세로 이미지 배치)     |

---

## 5. 터치 인터랙션

### 바텀시트

- **드래그 핸들 스와이프:** 시트 높이 조절
- **빈 영역 탭:** 변화 없음 (지도 조작 가능)
- **리스트 스크롤:** 시트가 Full 상태일 때만 내부 스크롤

### 상세 모달

- **뒤로 버튼 또는 스와이프:** 모달 닫기
- **탭 바 스와이프:** 탭 전환 (선택사항)
- **컨텐츠 영역:** 세로 스크롤

---

## 6. 구현 시 수정 파일

이 문서 기반으로 구현 진행 시 수정할 파일:

**바텀시트 (새로 생성)**

1. `src/components/ui/BottomSheet.tsx` - 바텀시트 컴포넌트 새로 생성

**컨트롤 패널**

2. `src/components/mapBox/topRightControls/topRightControls.jsx` - 모바일 분기 추가

**상세 모달**

3. `src/components/detail-info/detail-info-modal.tsx` - 모바일 풀스크린 분기 추가
4. `src/components/detail-info/header.tsx` - 모바일 헤더 (뒤로가기 버튼, 2줄 레이아웃)
5. `src/components/detail-info/tabs.tsx` - 모바일 가로 스크롤 대응

**탭별 컨텐츠 반응형**

6. `src/components/detail-info/tabs/overview-tab.tsx` - grid-cols-3 → grid-cols-2
7. `src/components/detail-info/tabs/status-tab/index.tsx` - grid-cols-6 → grid-cols-2
8. `src/components/detail-info/tabs/ecology-tab/index.tsx` - grid-cols-6 → grid-cols-1
9. `src/components/detail-info/tabs/environment-tab/index.tsx` - grid-cols-4 → grid-cols-2
10. `src/components/detail-info/tabs/photos-tab/index.tsx` - 사진 세로 배치 대응
